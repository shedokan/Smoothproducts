(function(a){a.fn.extend({smoothproducts:function(){function k(){a(".sp-selected").removeClass("sp-selected");a(".sp-lightbox").fadeOut(function(){a(this).remove()})}function f(a){return a.match(/url\([\"\']{0,1}(.+)[\"\']{0,1}\)+/i)[1]}a(".sp-loading").hide();a(".sp-wrap").each(function(){a(this).addClass("sp-touch");if(1<a("a",this).length){var b,c,d=a("a.sp-default",this)[0]?!0:!1;a(this).append('<div class="sp-large"></div><div class="sp-thumbs sp-tb-active"></div>');a("a",this).each(function(e){var g=
a("img",this).attr("src"),h=a(this).attr("href"),f="";if(0===e&&!d||a(this).hasClass("sp-default"))f=' class="sp-current"',b=h,c=a("img",this)[0].src;a(this).parents(".sp-wrap").find(".sp-thumbs").append('<a href="'+h+'" style="background-image:url('+g+')"'+f+"></a>");a(this).remove()});a(".sp-large",this).append('<a href="'+b+'" class="sp-current-big"><img src="'+c+'" alt="" /></a>')}else a(this).append('<div class="sp-large"></div>'),a("a",this).appendTo(a(".sp-large",this)).addClass(".sp-current-big");
a(".sp-wrap").css("display","inline-block")});a(document.body).on("click",".sp-thumbs",function(a){a.preventDefault()});a(document.body).on("mouseover",function(b){a(".sp-wrap").removeClass("sp-touch").addClass("sp-non-touch");b.preventDefault()});a(document.body).on("touchstart",function(){a(".sp-wrap").removeClass("sp-non-touch").addClass("sp-touch")});a(document.body).on("click",".sp-tb-active a",function(b){b.preventDefault();a(this).parent().find(".sp-current").removeClass();a(this).addClass("sp-current");
a(this).parents(".sp-wrap").find(".sp-thumbs").removeClass("sp-tb-active");a(this).parents(".sp-wrap").find(".sp-zoom").remove();b=a(this).parents(".sp-wrap").find(".sp-large").height();var c=a(this).parents(".sp-wrap").find(".sp-large").width();a(this).parents(".sp-wrap").find(".sp-large").css({overflow:"hidden",height:b+"px",width:c+"px"});a(this).addClass("sp-current").parents(".sp-wrap").find(".sp-large a").remove();b=a(this).parent().find(".sp-current").attr("href");c=f(a(this).parent().find(".sp-current").css("backgroundImage"));
a(this).parents(".sp-wrap").find(".sp-large").html('<a href="'+b+'" class="sp-current-big"><img src="'+c+'"/></a>');a(this).parents(".sp-wrap").find(".sp-large").hide().fadeIn(250,function(){var b=a(this).parents(".sp-wrap").find(".sp-large img").height();a(this).parents(".sp-wrap").find(".sp-large").animate({height:b},"fast",function(){a(".sp-large").css({height:"auto",width:"auto"})});a(this).parents(".sp-wrap").find(".sp-thumbs").addClass("sp-tb-active")})});a(document.body).on("mouseenter",".sp-non-touch .sp-large",
function(b){var c=a("a",this).attr("href");a(this).append('<div class="sp-zoom"><img src="'+c+'"/></div>');a(this).find(".sp-zoom").fadeIn(250);b.preventDefault()});a(document.body).on("mouseleave",".sp-non-touch .sp-large",function(b){a(this).find(".sp-zoom").fadeOut(250,function(){a(this).remove()});b.preventDefault()});a(document.body).on("click",".sp-non-touch .sp-zoom",function(b){var c=a(this).html(),d=a(this).parents(".sp-wrap").find(".sp-thumbs a").length,e=a(this).parents(".sp-wrap").find(".sp-thumbs .sp-current").index()+
1;a(this).parents(".sp-wrap").addClass("sp-selected");a("body").append("<div class='sp-lightbox' data-currenteq='"+e+"'>"+c+"</div>");1<d&&(a(".sp-lightbox").append("<a href='#' id='sp-prev'></a><a href='#' id='sp-next'></a>"),1==e?a("#sp-prev").css("opacity",".1"):e==d&&a("#sp-next").css("opacity",".1"));a(".sp-lightbox").fadeIn();b.preventDefault()});a(document.body).on("click",".sp-large a",function(b){var c=a(this).attr("href"),d=a(this).parents(".sp-wrap").find(".sp-thumbs a").length,e=a(this).parents(".sp-wrap").find(".sp-thumbs .sp-current").index()+
1;a(this).parents(".sp-wrap").addClass("sp-selected");a("body").append('<div class="sp-lightbox" data-currenteq="'+e+'"><img src="'+c+'"/></div>');1<d&&(a(".sp-lightbox").append("<a href='#' id='sp-prev'></a><a href='#' id='sp-next'></a>"),1==e?a("#sp-prev").css("opacity",".1"):e==d&&a("#sp-next").css("opacity",".1"));a(".sp-lightbox").fadeIn();b.preventDefault()});a(document.body).on("click","#sp-next",function(b){b.stopPropagation();var c=a(".sp-lightbox").data("currenteq"),d=a(".sp-selected .sp-thumbs a").length;
if(!(c>=d)){var e=c+1,g=a(".sp-selected .sp-thumbs").find("a:eq("+c+")").attr("href"),h=f(a(".sp-selected .sp-thumbs").find("a:eq("+c+")").css("backgroundImage"));c==d-1&&a("#sp-next").css("opacity",".1");a("#sp-prev").css("opacity","1");a(".sp-selected .sp-current").removeClass();a(".sp-selected .sp-thumbs a:eq("+c+")").addClass("sp-current");a(".sp-selected .sp-large").empty().append("<a href="+g+'><img src="'+h+'"/></a>');a(".sp-lightbox img").fadeOut(250,function(){a(this).remove();a(".sp-lightbox").data("currenteq",
e).append('<img src="'+g+'"/>');a(".sp-lightbox img").hide().fadeIn(250)})}b.preventDefault()});a(document.body).on("click","#sp-prev",function(b){b.stopPropagation();var c=a(".sp-lightbox").data("currenteq"),c=c-1;if(!(0>=c)){1==c&&a("#sp-prev").css("opacity",".1");var d=c-1,e=a(".sp-selected .sp-thumbs").find("a:eq("+d+")").attr("href"),g=f(a(".sp-selected .sp-thumbs").find("a:eq("+d+")").css("backgroundImage"));a("#sp-next").css("opacity","1");a(".sp-selected .sp-current").removeClass();a(".sp-selected .sp-thumbs a:eq("+
d+")").addClass("sp-current");a(".sp-selected .sp-large").empty().append("<a href="+e+'><img src="'+g+'"/></a>');a(".sp-lightbox img").fadeOut(250,function(){a(this).remove();a(".sp-lightbox").data("currenteq",c).append('<img src="'+e+'"/>');a(".sp-lightbox img").hide().fadeIn(250)})}b.preventDefault()});a(document.body).on("click",".sp-lightbox",function(){k()});a(document).keydown(function(a){if(27==a.keyCode)return k(),!1});a(".sp-large").mousemove(function(b){var c=a(this).width(),d=a(this).height(),
e=a(this).offset(),g=a(this).find(".sp-zoom").width(),f=a(this).find(".sp-zoom").height(),c=Math.floor((b.pageX-e.left)*(c-g)/c);b=Math.floor((b.pageY-e.top)*(d-f)/d);a(this).find(".sp-zoom").css({left:c,top:b})})}})})(jQuery);
