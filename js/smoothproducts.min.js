(function(a){a.fn.extend({smoothproducts:function(){function h(){a(".sp-selected").removeClass("sp-selected");a(".sp-lightbox").fadeOut(function(){a(this).remove()})}function g(a){return a.match(/url\([\"\']{0,1}(.+)[\"\']{0,1}\)+/i)[1]}a(".sp-loading").hide();a(".sp-wrap").each(function(){a(this).addClass("sp-touch");if(1<a("a",this).length){var b,c,d,e=a("a.sp-default",this)[0]?!0:!1;a(this).append('<div class="sp-large"></div><div class="sp-thumbs sp-tb-active"></div>');a("a",this).each(function(f){var k=
a("img",this).attr("src"),g=a(this).attr("href"),h="",l=a("img",this).attr("alt");if(0===f&&!e||a(this).hasClass("sp-default"))h=' class="sp-current"',b=g,c=a("img",this)[0].src,d=a("img",this)[0].alt;a(this).parents(".sp-wrap").find(".sp-thumbs").append('<a href="'+g+'" style="background-image:url('+k+')"'+h+' title="'+l+'"></a>');a(this).remove()});a(".sp-large",this).append('<a href="'+b+'" class="sp-current-big"><img src="'+c+'" alt="'+d+'" /></a>')}else a(this).append('<div class="sp-large"></div>'),
a("a",this).appendTo(a(".sp-large",this)).addClass(".sp-current-big");a(".sp-wrap").css("display","inline-block")});a(document.body).on("click",".sp-thumbs",function(a){a.preventDefault()});a(document.body).on("mouseover",function(b){a(".sp-wrap").removeClass("sp-touch").addClass("sp-non-touch");b.preventDefault()});a(document.body).on("touchstart",function(){a(".sp-wrap").removeClass("sp-non-touch").addClass("sp-touch")});a(document.body).on("click",".sp-tb-active a",function(b){b.preventDefault();
a(this).parent().find(".sp-current").removeClass();a(this).addClass("sp-current");a(this).parents(".sp-wrap").find(".sp-thumbs").removeClass("sp-tb-active");a(this).parents(".sp-wrap").find(".sp-zoom").remove();b=a(this).parents(".sp-wrap").find(".sp-large").height();var c=a(this).parents(".sp-wrap").find(".sp-large").width();a(this).parents(".sp-wrap").find(".sp-large").css({overflow:"hidden",height:b+"px",width:c+"px"});a(this).addClass("sp-current").parents(".sp-wrap").find(".sp-large a").remove();
var d=a(this).parent().find(".sp-current");b=d.attr("href");c=g(d.css("backgroundImage"));d=d.attr("title");a(this).parents(".sp-wrap").find(".sp-large").html('<a href="'+b+'" class="sp-current-big"><img src="'+c+'" alt="'+d+'"/></a>').hide().fadeIn(250,function(){var b=a(this).parents(".sp-wrap").find(".sp-large img").height();a(this).parents(".sp-wrap").find(".sp-large").animate({height:b},"fast",function(){a(".sp-large").css({height:"auto",width:"auto"})});a(this).parents(".sp-wrap").find(".sp-thumbs").addClass("sp-tb-active")})});
a(document.body).on("mouseenter",".sp-non-touch .sp-large",function(b){var c=a("a",this).attr("href");a(this).append('<div class="sp-zoom"><img src="'+c+'"/></div>');a(this).find(".sp-zoom").fadeIn(250);b.preventDefault()});a(document.body).on("mouseleave",".sp-non-touch .sp-large",function(b){a(this).find(".sp-zoom").fadeOut(250,function(){a(this).remove()});b.preventDefault()});a(document.body).on("click",".sp-non-touch .sp-zoom",function(b){var c=a(this).html(),d=a(this).parents(".sp-wrap").find(".sp-thumbs a").length,
e=a(this).parents(".sp-wrap").find(".sp-thumbs .sp-current").index()+1;a(this).parents(".sp-wrap").addClass("sp-selected");a("body").append("<div class='sp-lightbox' data-currenteq='"+e+"'>"+c+"</div>");1<d&&(a(".sp-lightbox").append("<a href='#' id='sp-prev'></a><a href='#' id='sp-next'></a>"),1==e?a("#sp-prev").css("opacity",".1"):e==d&&a("#sp-next").css("opacity",".1"));a(".sp-lightbox").fadeIn();b.preventDefault()});a(document.body).on("click",".sp-large a",function(b){var c=a(this).attr("href"),
d=a(this).parents(".sp-wrap").find(".sp-thumbs a").length,e=a(this).parents(".sp-wrap").find(".sp-thumbs .sp-current").index()+1,f=a(this).children("img").attr("alt");a(this).parents(".sp-wrap").addClass("sp-selected");a("body").append('<div class="sp-lightbox" data-currenteq="'+e+'"><img src="'+c+'" alt="'+f+'"/></div>');1<d&&(a(".sp-lightbox").append("<a href='#' id='sp-prev'></a><a href='#' id='sp-next'></a>"),1==e?a("#sp-prev").css("opacity",".1"):e==d&&a("#sp-next").css("opacity",".1"));a(".sp-lightbox").fadeIn();
b.preventDefault()});a(document.body).on("click","#sp-next",function(b){b.stopPropagation();var c=a(".sp-lightbox").data("currenteq"),d=a(".sp-selected .sp-thumbs a").length;if(!(c>=d)){var e=c+1,f=a(".sp-selected .sp-thumbs").find("a:eq("+c+")");newImg=f.attr("href");newThumb=g(f.css("backgroundImage"));alt=f.attr("title");c==d-1&&a("#sp-next").css("opacity",".1");a("#sp-prev").css("opacity","1");a(".sp-selected .sp-current").removeClass();a(".sp-selected .sp-thumbs a:eq("+c+")").addClass("sp-current");
a(".sp-selected .sp-large").empty().append("<a href="+newImg+'><img src="'+newThumb+'" alt="'+alt+'"/></a>');a(".sp-lightbox img").fadeOut(250,function(){a(this).remove();a(".sp-lightbox").data("currenteq",e).append('<img src="'+newImg+'" alt="'+alt+'"/>');a(".sp-lightbox img").hide().fadeIn(250)})}b.preventDefault()});a(document.body).on("click","#sp-prev",function(b){b.stopPropagation();var c=a(".sp-lightbox").data("currenteq"),c=c-1;if(!(0>=c)){1==c&&a("#sp-prev").css("opacity",".1");var d=c-1,
e=a(".sp-selected .sp-thumbs").find("a:eq("+d+")").attr("href"),f=g(a(".sp-selected .sp-thumbs").find("a:eq("+d+")").css("backgroundImage")),k=a(".sp-selected .sp-thumbs").find("a:eq("+d+")").attr("title");a("#sp-next").css("opacity","1");a(".sp-selected .sp-current").removeClass();a(".sp-selected .sp-thumbs a:eq("+d+")").addClass("sp-current");a(".sp-selected .sp-large").empty().append("<a href="+e+'><img src="'+f+'" alt="'+k+'"/></a>');a(".sp-lightbox img").fadeOut(250,function(){a(this).remove();
a(".sp-lightbox").data("currenteq",c).append('<img src="'+e+'" alt="'+k+'"/>');a(".sp-lightbox img").hide().fadeIn(250)})}b.preventDefault()});a(document.body).on("click",".sp-lightbox",function(){h()});a(document).keydown(function(a){if(27==a.keyCode)return h(),!1});a(".sp-large").mousemove(function(b){var c=a(this).width(),d=a(this).height(),e=a(this).offset(),f=a(this).find(".sp-zoom").width(),g=a(this).find(".sp-zoom").height(),c=Math.floor((b.pageX-e.left)*(c-f)/c);b=Math.floor((b.pageY-e.top)*
(d-g)/d);a(this).find(".sp-zoom").css({left:c,top:b})})}})})(jQuery);
